<template args="model">
    <div class="hero{model.mode === 'summary' ? '' : ' padded'}">
        <div class="text-area">
            <h1 if="model.title" data-html="title()"></h1>
            <div if="model.mode === 'summary'">
                <div class="instructions">{model.instructions}</div>
                <div class="with-tooltip">
                    {model.moreAbout}
                    <div class="tooltip" data-html="errataHoverHtml"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="strips-and-filter{model.mode === 'summary' ? '' : ' hidden'}">
        <img class="strips" src="/images/components/strips2.png" height="10" alt="" role="presentation">
        <div class="filter" skip="true"></div>
    </div>
    <div class="boxed" if="model.mode !== 'form'">
        <table class="body-block summary-table" if="model.mode === 'summary'">
            <thead>
                <tr>
                    <th each="md in model.summaryMetaData" class="{md.cssClass || ''}"
                     data-sort-fn="{md.sortFn}" data-sort-key="{md.key}"
                     role="button" tabindex="{md.sortFn ? 0 : null}" >
                     {md.label || ''}
                    <if condition="model.summarySortedBy === md.key">
                        <span class="{`sortdir${model.summarySortDirection}`}"></span>
                    <else>
                        <span if="md.sortFn" class="{`will-sort sortdir${md.sortFn === 'sort' ? 1 : -1}`}"></span>
                    </if>
                 </th>
                </tr>
            </thead>
            <tbody>
                <tr each="entry in model.summaryFilteredData()">
                    <td each="md in model.summaryMetaData">
                        <div class="{md.cssClass || ''}">
                            <if condition="md.key === 'id'">
                                <a href="{entry[md.key]}">{entry[md.key] || ''}</a>
                            <else>
                                {entry[md.key] || ''}
                                <a if="md.key === 'displayStatus' && entry[md.key] === 'No Correction'"
                                href="/errata/{entry.id}">Details</a>
                            </if>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="body-block summary-table-mobile" if="model.mode === 'summary'" each="entry in model.summaryFilteredData()">
            <tbody>
                <tr each="md in model.summaryMetaData">
                    <th>{md.label}</th>
                    <td><div>
                        <if condition="md.key === 'id'">
                            <a href="{entry[md.key]}">{entry[md.key] || ''}</a>
                        <else>
                            {entry[md.key] || ''}
                        </if>
                    </div></td>
                </tr>
            </tbody>
        </table>
        <div class="detail" if="model.mode === 'detail'">
            <div class="progress-bar-container body-block" if="model.detail">
                <div class="progress-bar-labels">
                    <div class="label">
                        <div class="event">In Review</div>
                        <div if="model.detail.showDatesInBar" class="date">{model.detail.createdDate}</div>
                    </div>
                    <div class="label">
                        <div class="event">Reviewed</div>
                        <div if="model.detail.showDatesInBar" class="date">{model.detail.reviewedDate}</div>
                    </div>
                    <div class="label">
                        <div class="event">{model.detail.barStatus || 'Corrected'}</div>
                        <div if="model.detail.showDatesInBar" class="date">{model.detail.correctedDate}</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-bar-layer">
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                    <div class="progress-bar-layer">
                        <div class="node{model.detail.firstNodeClass}"></div>
                        <div class="node{model.detail.secondNodeClass}"></div>
                        <div class="node{model.detail.thirdNodeClass}"></div>
                    </div>
                </div>
            </div>
            <detail-block skip="true"></detail-block>
        </div>
    </div>
    <div class="text-content form-container" skip="true"></div>
</template>
